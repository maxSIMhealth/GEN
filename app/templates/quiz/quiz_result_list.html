{% extends 'base_course_section.html' %}

{% load static %}
{% load i18n %}
{% load humanize %}
{% load django_bootstrap5 %}
{% load render_table from django_tables2 %}

{% block content_title %}
    <a href="{% url 'section' course.pk section.pk %}" class="text-underline-dashed">{{ section.name }}</a> /
    {{ quiz.name }} / {% trans "Quiz data" %}
{% endblock content_title %}

{% block content %}
    <div class="card">
        <div class="card-header fs-5">
            <span class="pt-1 me-auto">{% translate "All submissions" %}</span>
            <div class="btn-group btn-group-sm float-end" role="group">
                <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle btn-sm" data-bs-toggle="dropdown" aria-expanded="false">
                    {% translate "Download data" %}
                </button>
                <ul class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                    <li><a class="dropdown-item" href="{% url 'quiz_result_list' course.pk section.pk quiz.pk %}?_export=csv">CSV</a></li>
                    <li><a class="dropdown-item" href="{% url 'quiz_result_list' course.pk section.pk quiz.pk %}?_export=json">JSON</a></li>
                    <li><a class="dropdown-item" href="{% url 'quiz_result_list' course.pk section.pk quiz.pk %}?_export=xlsx">XLSX</a></li>
                </ul>
            </div>
        </div>
        <div class="card-body pb-0">
{#            <li>results_list: {{ results_list }}</li>#}
{#            <li>#}
{#                {% for item in results_list %}#}
{#                    item: {{ item }}, item.value: {{ item.value }}, item.student {{ item.student }}#}
{#                {% endfor %}#}
{#            </li>#}
            <select class="form-select" aria-label="Default select example">
                {% for item in results_list %}
                    <option value="{{ item }}">Response {{ forloop.counter }}</option>
                {% endfor %}
            </select>
            {% for item in results_list %}
                <a href="?student={{ item }}"> Response {{ forloop.counter }}</a>
            {% endfor %}


            {% if filter %}
                <form action="" method="get" class="form form-inline">
                    {% bootstrap_form filter.form layout='inline' %}
                    {% bootstrap_button 'filter' %}
                </form>
            {% endif %}
{#            {% render_table table 'django_tables2/bootstrap.html' %}#}
            {% render_table table %}
        </div>
        <div class="card-footer">
            <a href="{% url 'section' course.pk section.pk %}" class="btn btn-block btn-primary">
                {% blocktrans with section_name=section.name %}Return to {{ section_name }}{% endblocktrans %}
            </a>
        </div>
    </div>


{% endblock content %}

{% block navbar %}

{% endblock %}