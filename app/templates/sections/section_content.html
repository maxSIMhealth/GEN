{% extends 'base_course_section.html' %}

{% load static %}
{% load i18n %}
{% load sri %}
{% load humanize %}

{% block javascript_top %}
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.13.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuedraggable@2.24.3/dist/vuedraggable.umd.min.js"></script>

    <script src="https://unpkg.com/vue-select@3.11.2"></script>
    <link rel="stylesheet" href="https://unpkg.com/vue-select@3.11.2/dist/vue-select.css">
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
{% endblock stylesheet %}

{% block content %}
    {% if section.start_date or section.end_data %}
        <ul class="list-group mb-3">
            {% if section.start_date %}
                <li class="list-group-item"><b>{% trans "Start" %}: </b>{{ section.start_date|naturaltime }}
                    <small>({{ section.start_date }} UTC)</small></li>
            {% endif %}
            {% if section.end_date %}
                <li class="list-group-item"><b>{% trans "End" %}: </b>{{ section.end_date|naturaltime }}
                    <small>({{ section.end_date }} UTC)</small></li>
            {% endif %}
        </ul>
    {% endif %}

    {% if section.description %}
        <p class="text-break">{{ section.description|safe|linebreaksbr }}</p>
    {% endif %}

    {% if section_items %}
        <div class="card-group mb-3">
            <div class="card quiz">
                <div class="card-body">
                    <div class="pagination-items-container">
                        {% for item in section_items %}
                            <div class="pagination-item" style="display: none;">
                                <div class="fs-4">{{ item.name }}</div>
                                {% if item.type == 'Video' %}
                                    {% include 'content/video.html' with video=item.videofile %}
                                {% elif item.type == 'Game' and item.game.type == 'MC' %}
                                    <p>{{ item.description }}</p>
                                    {% include 'games/move_to_columns.html' with id=item.game.pk info=item.game.info_json source_list=item.game.source_items_json choice1_list=item.game.choice1_items_json choice2_list=item.game.choice2_items_json %}
                                {% elif item.type == 'Game' and item.game.type == 'TB' %}
                                    <p>{{ item.description }}</p>
                                    {% include 'games/complete_text_boxes.html' with id=item.game.pk terms=item.game.terms items=item.game.items%}
                                {% elif item.type == 'Game' and item.game.type == 'MT' %}
                                    <p>{{ item.description }}</p>
                                    {% include 'games/match_terms.html' with id=item.game.pk terms=item.game.terms items=item.game.items%}
                                {% elif item.type == 'Content' %}
                                    <p>{{ item.contentitem.content|safe }}</p>
                                {% endif %}
                                {% if forloop.last %}
                                    {% include 'partials/mark_section_completed.html' %}
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="card-footer">
                    <nav aria-label="quiz navigation">
                        <ul class="pagination justify-content-center mb-0">
                            <li id="pagination-navigation-previous" class="page-item disabled">
                                <a class="page-link" href="javascript:void(0);" tabindex="-1" aria-disabled="true"
                                   onclick="previousPaginationItem()">{% trans "Previous" %}</a>
                            </li>
                            <li class="page-item disabled"><a id="pagination-navigation-position" class="page-link"
                                                              href="javascript:void(0);" tabindex="-1"
                                                              aria-disabled="true">-- of --</a></li>
                            <li id="pagination-navigation-next" class="page-item">
                                <a class="page-link" href="javascript:void(0);" onclick="nextPaginationItem()">{% trans "Next" %}</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    {% else %}
        <div class="card mb-3 section-text">
            <div class="card-body">
                {{ section.content|safe }}

                {% include 'partials/mark_section_completed.html' %}
            </div>
        </div>
    {% endif %}

{% endblock content %}

{% block javascript_bottom %}
    {% sri_static "js/pagination.js" %}
    {% sri_static "js/help-guide-course.js" %}
{% endblock javascript_bottom %}